<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Inventory System</title>
    <link rel="stylesheet" href="../css/dashboard.css" />
  </head>
  <style>
    .hidden {
      display: none;
    }
  </style>

  <body>
    <nav class="navbar">
      <div class="nav-center">
        <input
          type="text"
          id="globalSearch"
          placeholder="Search products, sales, users..."
          autocomplete="off"
          aria-label="Global search"
          aria-controls="searchResults"
          aria-expanded="false"
        />
        <div id="searchResults" class="search-results" role="listbox"></div>
      </div>
    </nav>

    <div class="nav-right">
      <!-- <a href="dashboard.html">Dashboard</a>
      <a href="profile.html">Profile</a>
      <a href="logout.html">Logout</a> -->
    </div>

    <div class="dashboard">
      <h1>Welcome <span id="userRole"></span></h1>

      <div id="adminPanel" class="panel hidden">
        <h2>Admin Panel</h2>
        <ul>
          <li><a href="../html/products.html">Manage Products</a></li>
          <li><a href="../html/viewsalesadmin.html">View Sales</a></li>
          <li><a href="../html/manage-users.html">Manage Users</a></li>
          <li><a href="../html/analytics.html">üìä Analytics</a></li>
          <li><a href="../html/profile.html">üë§ My Profile</a></li>
        </ul>
      </div>

      <div id="salesPanel" class="panel hidden">
        <h2>Sales Panel</h2>
        <ul>
          <li><a href="../html/create-sale.html">Create Sale</a></li>
          <li><a href="../html/mysales.html">My Sales</a></li>
        </ul>
      </div>
    </div>

    <button onclick="localStorage.clear(); location.href='/html/login.html'">Logout</button>

    <div class="notif-wrapper">
      <button id="notifBtn" class="notif-btn">üîî</button>
      <div id="notifDropdown" class="notif-dropdown"></div>
    </div>
    <div id="notificationBox"></div>

    <div class="export-bar">
      <div class="export-title">Reports</div>
      <div class="export-actions">
        <a href="/api/export/sales.csv" class="btn btn-export" data-variant="csv">CSV</a>
        <a href="/api/export/sales.xlsx" class="btn btn-export" data-variant="xlsx">Excel</a>
        <a href="/api/export/sales.pdf" class="btn btn-export" data-variant="pdf">PDF</a>
        
        <div class="export-menu">
          <div class="menu-dropdown" id="exportDropdown">
            <a href="/api/export/sales.csv">Download CSV</a>
            <a href="/api/export/sales.xlsx">Download Excel</a>
            <a href="/api/export/sales.pdf">Download PDF</a>
            <hr />
            <button class="menu-action" id="sendReportBtn">‚úâÔ∏è Email Daily Report</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ONLY LOAD EXTERNAL SCRIPTS - NO INLINE AUTH CODE -->
    <script src="../js/dashboard.js"></script>
    <script src="../js/global-search.js" defer></script>
  </body>
</html>